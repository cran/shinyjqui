shinyjqui=function(){var getInputContainer=function(a){var b=$(a).closest(".shiny-input-container");return b.length?b.get(0):a},regShinyInput=function(a,b,c){$.each(c,function(c,d){var e=b+"_"+c;$.each(d,function(b,c){$(a).on(b,function(a,b){var d=c(a,b);Shiny.onInputChange(e,d)})})})},handleShinyInput=function(a,b,c){var d=shinyjqui.getId(a);if(d){if(b&&b.hasOwnProperty("shiny")){var e=Object.keys(c);$.each(e,function(a,d){$.inArray(d.replace(/:.+/,""),Object.keys(b.shiny))>=0&&delete c[d]}),$.extend(c,b.shiny),delete b.shiny}regShinyInput(a,d,c)}},evaluateJSExpressions=function(opt,idx){$.each(idx,function(key,value){!0===value&&opt[key]?opt[key]=eval("("+opt[key]+")"):"object"==typeof value&&evaluateJSExpressions(opt[key],value)})},evalJS=function(a){var b=a._js_idx;return b&&"object"==typeof b&&evaluateJSExpressions(a,b),a},interactions={draggable:{enable:function(a,b){var c=function(a,b){return $(a.target).position()};handleShinyInput(a,b,{position:{dragcreate:c,drag:c},is_dragging:{dragcreate:function(a,b){return!1},dragstart:function(a,b){return!0},dragstop:function(a,b){return!1}}}),$(a).draggable(b)},disable:function(a){a=getInputContainer(a),$(a).draggable("destroy")}},droppable:{enable:function(a,b){a=getInputContainer(a),handleShinyInput(a,b,{over:{dropcreate:function(a,b){return[]},dropover:function(a,b){return shinyjqui.getId(b.draggable.get(0))}},drop:{dropcreate:function(a,b){return[]},drop:function(a,b){return shinyjqui.getId(b.draggable.get(0))}},out:{dropcreate:function(a,b){return[]},dropout:function(a,b){return shinyjqui.getId(b.draggable.get(0))}},dragging:{dropcreate:function(a,b){return[]},dropactivate:function(a,b){return shinyjqui.getId(b.draggable.get(0))},dropdeactivate:function(a,b){return[]}},dropped:{dropcreate:function(a,b){return $(a.target).data("shinyjqui_droppedIds",[]),[]},drop:function(a,b){var c=$(a.target).data("shinyjqui_droppedIds"),d=shinyjqui.getId(b.draggable.get(0));return-1==$.inArray(d,c)&&c.push(d),$(a.target).data("shinyjqui_droppedIds",c),c},dropout:function(a,b){var c=$(a.target).data("shinyjqui_droppedIds"),d=shinyjqui.getId(b.draggable.get(0));return c.splice($.inArray(d,c),1),$(a.target).data("shinyjqui_droppedIds",c),c}}}),$(a).droppable(b)},disable:function(a){a=getInputContainer(a),$(a).droppable("destroy")}},resizable:{enable:function(a,b){if(!$(a).parent().hasClass("ui-resizable")){if(/action-button|html-widget-output|shiny-.+?-output/.test($(a).attr("class"))){var c=$("<div></div>").outerWidth($(a).outerWidth()?$(a).outerWidth():"100%").outerHeight($(a).outerHeight()?$(a).outerHeight():"100%").addClass("jqui-resizable-wrapper");a=$(a).wrap(c).outerWidth("100%").outerHeight("100%").parent().get(0)}handleShinyInput(a,b,{size:{resizecreate:function(a,b){return{width:$(a.target).width(),height:$(a.target).height()}},resize:function(a,b){return b.size}},is_resizing:{resizecreate:function(a,b){return!1},resizestart:function(a,b){return!0},resizestop:function(a,b){return!1}}}),$(a).resizable(b)}},disable:function(a){var b=$(a).parent(".ui-resizable");b.length?(b.resizable("destroy"),$(a).outerWidth(b.outerWidth()).outerHeight(b.outerHeight()).insertAfter(b),b.remove()):$(a).resizable("destroy")}},selectable:{enable:function(a,b){var c=function(a,b){var c=$(a.target).children(".ui-selected"),d=c.map(function(a,b){return b.innerHTML}).get();return{id:c.map(function(a,b){return shinyjqui.getId(b)}).get(),html:d}};handleShinyInput(a,b,{"selected:shinyjqui.df":{selectablecreate:c,selectablestop:c},is_selecting:{selectablecreate:function(a,b){return!1},selectablestart:function(a,b){return!0},selectablestop:function(a,b){return!1}}}),$(a).selectable(b)},disable:function(a){$(a).selectable("destroy")}},sortable:{enable:function(a,b){var c=function(a,b){var c=$(a.target).children(),d=c.map(function(a,b){return b.innerHTML}).get();return{id:c.map(function(a,b){return shinyjqui.getId(b)}).get(),html:d}};handleShinyInput(a,b,{"order:shinyjqui.df":{sortcreate:c,sortupdate:c}}),$(a).sortable(b)},disable:function(a){$(a).sortable("destroy")}}};return{getId:function(a){var b=$(a).attr("id");return b||($(a).hasClass("shiny-input-container")?b=$(a).find(".shiny-bound-input").attr("id"):$(a).hasClass("jqui-resizable-wrapper")&&(b=$(a).find(".shiny-bound-output").attr("id"))),b||""},msgCallback:function(a){if(!a.hasOwnProperty("selector"))return void console.warn("No selector found");var b=$(a.selector).map(function(a,b){return getInputContainer(b)});if(!a.hasOwnProperty("method"))return void console.warn("No method found");var c=a.method;if(!a.hasOwnProperty("func"))return void console.warn("No func found");var d=a.func;if(a=evalJS(a),"interaction"===c)b.removeClass(function(a,b){return(b.match(/(^|\s)jqui-interaction-\S+/g)||[]).join(" ")}),!0===a.switch?b.each(function(b,c){console.log("==================="),console.log("ENABLE: "+d),console.log("ELEMENT: "),console.log(c),console.log("OPTIONS: "),console.log(a.options),console.log("==================="),interactions[d].enable(c,a.options)}):!1===a.switch?b.each(function(a,b){console.log("==================="),console.log("DISABLE: "+d),console.log("ELEMENT: "),console.log(b),console.log("==================="),interactions[d].disable(b)}):console.warn("Invalid switch: "+a.switch);else if("effect"===c){if(!a.hasOwnProperty("effect"))return void console.warn("No effect found. Action abort.");if("transfer"===a.effect&&("hide"===d||"show"===d||"toggle"===d))return void console.warn("The transfer effect cannot be used in hide/show. Action abort.");b[d](a.effect,a.options,a.duration,a.complete)}else if("class"===c)if("add"===d||"remove"===d){if(!a.hasOwnProperty("className"))return void console.warn("No className found");b[d+"Class"](a.className,a.duration,a.easing,a.complete)}else if("switch"===d){if(!a.hasOwnProperty("removeClassName"))return void console.warn("No removeClassName found");if(!a.hasOwnProperty("addClassName"))return void console.warn("No addClassName found");b[d+"Class"](a.removeClassName,a.addClassName,a.duration,a.easing,a.complete)}else console.warn("Invalid func: "+a.func);else console.warn("Invalid method: "+a.method)},init:function(){Shiny.addCustomMessageHandler("shinyjqui",shinyjqui.msgCallback)}}}(),$(function(){shinyjqui.init()});